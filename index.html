<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Dynamic Inventory</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    input, button { padding: 8px; font-size: 16px; }
    #searchInput { width: 100%; margin-bottom: 10px; }
    .category-buttons button {
      margin: 5px 5px 10px 0;
      background: #007BFF;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .category-buttons button:hover { background: #0056b3; }
    table {
      width: 100%; border-collapse: collapse; margin-top: 10px;
    }
    th, td {
      padding: 10px; border: 1px solid #ccc; text-align: left;
    }
    th { background-color: #007BFF; color: white; }
    img { width: 60px; }
    #addButton {
      margin-top: 10px;
      background-color: green;
      color: white;
      border: none;
      border-radius: 4px;
    }
  </style>
</head>
<body>

<h2>Inventory System</h2>
<input type="text" id="searchInput" placeholder="Search items..." onkeyup="renderTable()">

<div class="category-buttons">
  <button onclick="filterCategory('')">All</button>
  <button onclick="filterCategory('Food')">Food</button>
  <button onclick="filterCategory('Drink')">Drink</button>
  <button onclick="filterCategory('Supplies')">Supplies</button>
</div>

<table id="inventoryTable">
  <thead>
    <tr>
      <th>Item ID</th>
      <th>Image</th>
      <th>Name</th>
      <th>Category</th>
      <th>Stock</th>
      <th>Location</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<button id="addButton" onclick="addItem()">âž• Add Item</button>

<script>
  let inventory = [
    {
      id: "BURGER123",
      name: "Classic Burger",
      category: "Food",
      stock: 10,
      location: "Front Counter",
      image: "https://via.placeholder.com/60?text=Burger"
    },
    {
      id: "FRIES456",
      name: "French Fries",
      category: "Food",
      stock: 20,
      location: "Kitchen",
      image: "https://via.placeholder.com/60?text=Fries"
    }
  ];

  let currentFilter = "";
  let searchQuery = "";

  function renderTable() {
    const tbody = document.querySelector("#inventoryTable tbody");
    tbody.innerHTML = "";

    searchQuery = document.getElementById("searchInput").value.toLowerCase();

    const filtered = inventory.filter(item => {
      const text = `${item.id} ${item.name} ${item.category} ${item.location}`.toLowerCase();
      return text.includes(searchQuery) && (currentFilter === "" || item.category === currentFilter);
    });

    filtered.forEach(item => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${item.id}</td>
        <td><img src="${item.image}" alt="${item.name}" /></td>
        <td>${item.name}</td>
        <td>${item.category}</td>
        <td>${item.stock}</td>
        <td>${item.location}</td>
      `;
      tbody.appendChild(row);
    });
  }

  function filterCategory(category) {
    currentFilter = category;
    renderTable();
  }

  function addItem() {
    const newId = `ITEM${Date.now()}`;
    inventory.push({
      id: newId,
      name: "New Item",
      category: "Supplies",
      stock: 0,
      location: "Storage",
      image: "https://via.placeholder.com/60?text=New"
    });
    renderTable();
    alert(`New item added with ID: ${newId}\nUse ?search=${newId} in your link.`);
  }

  window.onload = () => {
    const params = new URLSearchParams(window.location.search);
    const search = params.get("search");
    if (search) {
      document.getElementById("searchInput").value = search;
    }
    renderTable();
  };
</script>

</body>
</html>
